\hypertarget{classParser}{}\doxysection{Parser Class Reference}
\label{classParser}\index{Parser@{Parser}}


Parse the config file.  




{\ttfamily \#include $<$parsing.\+hpp$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classParser_afdb0f887a68b3798fff6f302d0788dac}\label{classParser_afdb0f887a68b3798fff6f302d0788dac}} 
{\bfseries Parser} (\mbox{\hyperlink{structHttpConfig}{Http\+Config}} \&)
\item 
void \mbox{\hyperlink{classParser_a62b7984e1c4b0f3d9d34385d900c9905}{tokenize\+Config}} (string)
\begin{DoxyCompactList}\small\item\em Tokenize a line of a config file. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classParser_a69fb79ef97a7f263abfd84fdce188aac}\label{classParser_a69fb79ef97a7f263abfd84fdce188aac}} 
void {\bfseries validate\+First\+Token} (string)
\item 
\mbox{\Hypertarget{classParser_a0140ec6f6acc990b9f927994fe9413a7}\label{classParser_a0140ec6f6acc990b9f927994fe9413a7}} 
void {\bfseries validate\+Last\+Token} (string)
\item 
void \mbox{\hyperlink{classParser_ae76473bd7ac12e0671da1354b24e44a0}{init\+Settings}} ()
\begin{DoxyCompactList}\small\item\em Initialize settings from token vector. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classParser_a8d71a164fcae55af0a65720eb8f59852}{context\+Switch\+Case}} (int context)
\begin{DoxyCompactList}\small\item\em Call the appropriate context setting function. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classParser_aa908b9fa132aae72f9bf9792bc1d7096}\label{classParser_aa908b9fa132aae72f9bf9792bc1d7096}} 
bool \mbox{\hyperlink{classParser_aa908b9fa132aae72f9bf9792bc1d7096}{set\+Context}} ()
\begin{DoxyCompactList}\small\item\em define in which context the token is \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classParser_ac828b8836205819d67edb61f78f0e354}{get\+Setting}} (string settings\+List\mbox{[}$\,$\mbox{]}, int size)
\begin{DoxyCompactList}\small\item\em Get the Setting object. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classParser_afd3f83f8e16969f87e0eaa2d095aa19f}\label{classParser_afd3f83f8e16969f87e0eaa2d095aa19f}} 
bool \mbox{\hyperlink{classParser_afd3f83f8e16969f87e0eaa2d095aa19f}{set\+Global\+Setting}} ()
\begin{DoxyCompactList}\small\item\em Set global context settings. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classParser_a2d2ee878d9c527232d73a26ac785625d}\label{classParser_a2d2ee878d9c527232d73a26ac785625d}} 
bool {\bfseries set\+Events\+Context} ()
\item 
\mbox{\Hypertarget{classParser_a5d9089625e38ece299d195b8abbf1e9b}\label{classParser_a5d9089625e38ece299d195b8abbf1e9b}} 
bool {\bfseries set\+Events\+Setting} ()
\item 
\mbox{\Hypertarget{classParser_a269d34df571e3d34aea263dd832e94f1}\label{classParser_a269d34df571e3d34aea263dd832e94f1}} 
bool {\bfseries set\+Worker\+Connections} ()
\item 
\mbox{\Hypertarget{classParser_a9184b6df34f3f6f8a2d4327d28898adc}\label{classParser_a9184b6df34f3f6f8a2d4327d28898adc}} 
bool {\bfseries set\+Http\+Context} ()
\item 
\mbox{\Hypertarget{classParser_a769741a7d07969f22b50401ffa60df0c}\label{classParser_a769741a7d07969f22b50401ffa60df0c}} 
bool \mbox{\hyperlink{classParser_a769741a7d07969f22b50401ffa60df0c}{set\+Http\+Setting}} ()
\begin{DoxyCompactList}\small\item\em Set http setting. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classParser_a482ab30645fe445b8384e7d99babacb6}\label{classParser_a482ab30645fe445b8384e7d99babacb6}} 
bool {\bfseries set\+Server\+Context} ()
\item 
\mbox{\Hypertarget{classParser_a3ae2114fadfd138606fabfcf5e89d9e2}\label{classParser_a3ae2114fadfd138606fabfcf5e89d9e2}} 
bool \mbox{\hyperlink{classParser_a3ae2114fadfd138606fabfcf5e89d9e2}{set\+Server\+Setting}} ()
\begin{DoxyCompactList}\small\item\em Set server setting. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classParser_ae2a73f3b789a406d9e7d47854074cf6e}{set\+Listen}} ()
\begin{DoxyCompactList}\small\item\em Transform the token into the listening port of the server. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classParser_a32db756a819d2d0454071100f469805d}{retrieve\+Port}} (string)
\begin{DoxyCompactList}\small\item\em validate the value for port setting in listen \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classParser_a2fd377280dd07402810b49b0afbc36a0}{set\+Server\+Name}} ()
\begin{DoxyCompactList}\small\item\em Set the server name. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classParser_ac6a7cf0ec866f6b58c7f3e499dad8ffb}\label{classParser_ac6a7cf0ec866f6b58c7f3e499dad8ffb}} 
bool {\bfseries set\+Access\+Log} ()
\item 
\mbox{\Hypertarget{classParser_ae67005f73bff5d6c2af6f7fd83150887}\label{classParser_ae67005f73bff5d6c2af6f7fd83150887}} 
bool {\bfseries set\+Root} ()
\item 
\mbox{\Hypertarget{classParser_a3e601a4c26c20b5f308baaed5fee2673}\label{classParser_a3e601a4c26c20b5f308baaed5fee2673}} 
bool \mbox{\hyperlink{classParser_a3e601a4c26c20b5f308baaed5fee2673}{set\+Location\+Setting}} ()
\begin{DoxyCompactList}\small\item\em Set http setting. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classParser_a8e98ae6be42df639c1e994c618502b27}\label{classParser_a8e98ae6be42df639c1e994c618502b27}} 
string {\bfseries set\+Location\+Uri} ()
\item 
\mbox{\Hypertarget{classParser_a97a6d4c6bb03e8d1d7fd48c6006c5dab}\label{classParser_a97a6d4c6bb03e8d1d7fd48c6006c5dab}} 
void {\bfseries set\+Path} (string \&)
\item 
\mbox{\Hypertarget{classParser_a4b02ca22cda2a06453cf8cc4e0e01be2}\label{classParser_a4b02ca22cda2a06453cf8cc4e0e01be2}} 
void {\bfseries set\+Fast\+CGI} (string \&)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Parse the config file. 

Definition at line 52 of file parsing.\+hpp.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classParser_a8d71a164fcae55af0a65720eb8f59852}\label{classParser_a8d71a164fcae55af0a65720eb8f59852}} 
\index{Parser@{Parser}!contextSwitchCase@{contextSwitchCase}}
\index{contextSwitchCase@{contextSwitchCase}!Parser@{Parser}}
\doxysubsubsection{\texorpdfstring{contextSwitchCase()}{contextSwitchCase()}}
{\footnotesize\ttfamily bool Parser\+::context\+Switch\+Case (\begin{DoxyParamCaption}\item[{int}]{context }\end{DoxyParamCaption})}



Call the appropriate context setting function. 


\begin{DoxyParams}{Parameters}
{\em context} & to represent which context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true or throw logic\+\_\+error 
\end{DoxyReturn}


Definition at line 98 of file parsing.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{98                                           \{}
\DoxyCodeLine{99     \textcolor{keywordflow}{switch} (context) \{}
\DoxyCodeLine{100         \textcolor{keywordflow}{case} GLOBAL:}
\DoxyCodeLine{101             \textcolor{keywordflow}{return} \mbox{\hyperlink{classParser_afd3f83f8e16969f87e0eaa2d095aa19f}{setGlobalSetting}}();}
\DoxyCodeLine{102         \textcolor{keywordflow}{case} EVENTS:}
\DoxyCodeLine{103             \textcolor{keywordflow}{return} setEventsSetting();}
\DoxyCodeLine{104         \textcolor{keywordflow}{case} HTTP:}
\DoxyCodeLine{105             \textcolor{keywordflow}{return} \mbox{\hyperlink{classParser_a769741a7d07969f22b50401ffa60df0c}{setHttpSetting}}();}
\DoxyCodeLine{106         \textcolor{keywordflow}{case} SERVER:}
\DoxyCodeLine{107             \textcolor{keywordflow}{return} \mbox{\hyperlink{classParser_a3ae2114fadfd138606fabfcf5e89d9e2}{setServerSetting}}();}
\DoxyCodeLine{108         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{109             \textcolor{keywordflow}{throw} std::logic\_error(\textcolor{stringliteral}{"{}Invalid context: "{}} + *it);}
\DoxyCodeLine{110     \}}
\DoxyCodeLine{111     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{112 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classParser_ac828b8836205819d67edb61f78f0e354}\label{classParser_ac828b8836205819d67edb61f78f0e354}} 
\index{Parser@{Parser}!getSetting@{getSetting}}
\index{getSetting@{getSetting}!Parser@{Parser}}
\doxysubsubsection{\texorpdfstring{getSetting()}{getSetting()}}
{\footnotesize\ttfamily int Parser\+::get\+Setting (\begin{DoxyParamCaption}\item[{string}]{settings\+List\mbox{[}$\,$\mbox{]},  }\item[{int}]{size }\end{DoxyParamCaption})}



Get the Setting object. 


\begin{DoxyParams}{Parameters}
{\em settings\+List} & Array of settings \\
\hline
{\em size} & Size of settings array \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int Index of setting in settings array 
\end{DoxyReturn}


Definition at line 136 of file parsing.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{136                                                       \{}
\DoxyCodeLine{137     vector<string>           settings(settingsList, settingsList + size);}
\DoxyCodeLine{138     vector<string>::iterator settingIt =}
\DoxyCodeLine{139         find(settings.begin(), settings.end(), *it);}
\DoxyCodeLine{140     \textcolor{keywordflow}{if} (settingIt == settings.end()) \{}
\DoxyCodeLine{141         \textcolor{keywordflow}{return} (-\/1);}
\DoxyCodeLine{142     \}}
\DoxyCodeLine{143     \textcolor{keywordflow}{return} (settingIt -\/ settings.begin());}
\DoxyCodeLine{144 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classParser_ae76473bd7ac12e0671da1354b24e44a0}\label{classParser_ae76473bd7ac12e0671da1354b24e44a0}} 
\index{Parser@{Parser}!initSettings@{initSettings}}
\index{initSettings@{initSettings}!Parser@{Parser}}
\doxysubsubsection{\texorpdfstring{initSettings()}{initSettings()}}
{\footnotesize\ttfamily void Parser\+::init\+Settings (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Initialize settings from token vector. 


\begin{DoxyParams}{Parameters}
{\em tokens} & \mbox{[}in\mbox{]} Vector of tokens \\
\hline
\end{DoxyParams}


Definition at line 77 of file parsing.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{77                           \{}
\DoxyCodeLine{78     it = tokens.begin();}
\DoxyCodeLine{79     \textcolor{keywordflow}{for} (; it != tokens.end(); ++it) \{}
\DoxyCodeLine{80         \textcolor{keywordflow}{while} (*it == \textcolor{stringliteral}{"{}\}"{}} \&\& !context.empty()) \{}
\DoxyCodeLine{81             context.pop\_back();}
\DoxyCodeLine{82             ++it;}
\DoxyCodeLine{83         \}}
\DoxyCodeLine{84         \textcolor{keywordflow}{if} (it == tokens.end()) \{}
\DoxyCodeLine{85             \textcolor{keywordflow}{break};}
\DoxyCodeLine{86         \}}
\DoxyCodeLine{87         \mbox{\hyperlink{classParser_aa908b9fa132aae72f9bf9792bc1d7096}{setContext}}();}
\DoxyCodeLine{88         \textcolor{keywordflow}{if} (context.back() == -\/1) \{}
\DoxyCodeLine{89             context.pop\_back();}
\DoxyCodeLine{90         \}}
\DoxyCodeLine{91         \mbox{\hyperlink{classParser_a8d71a164fcae55af0a65720eb8f59852}{contextSwitchCase}}(context.back());}
\DoxyCodeLine{92     \}}
\DoxyCodeLine{93     \textcolor{keywordflow}{if} (context.size() != 1) \{}
\DoxyCodeLine{94         \textcolor{keywordflow}{throw} std::exception();}
\DoxyCodeLine{95     \}}
\DoxyCodeLine{96 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classParser_a32db756a819d2d0454071100f469805d}\label{classParser_a32db756a819d2d0454071100f469805d}} 
\index{Parser@{Parser}!retrievePort@{retrievePort}}
\index{retrievePort@{retrievePort}!Parser@{Parser}}
\doxysubsubsection{\texorpdfstring{retrievePort()}{retrievePort()}}
{\footnotesize\ttfamily int Parser\+::retrieve\+Port (\begin{DoxyParamCaption}\item[{string}]{num }\end{DoxyParamCaption})}



validate the value for port setting in listen 


\begin{DoxyParams}{Parameters}
{\em num} & the port value in string format \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int if port value is all integer 
\end{DoxyReturn}


Definition at line 280 of file parsing.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{280                                    \{}
\DoxyCodeLine{281     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < num.length(); ++i) \{}
\DoxyCodeLine{282         \textcolor{keywordflow}{if} (!isdigit(num[i])) \{}
\DoxyCodeLine{283             \textcolor{keywordflow}{throw} logic\_error(\textcolor{stringliteral}{"{}Error: invalid port number for listen: "{}} + num);}
\DoxyCodeLine{284         \}}
\DoxyCodeLine{285     \}}
\DoxyCodeLine{286     \textcolor{keywordflow}{return} (atoi(num.c\_str()));}
\DoxyCodeLine{287 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classParser_ae2a73f3b789a406d9e7d47854074cf6e}\label{classParser_ae2a73f3b789a406d9e7d47854074cf6e}} 
\index{Parser@{Parser}!setListen@{setListen}}
\index{setListen@{setListen}!Parser@{Parser}}
\doxysubsubsection{\texorpdfstring{setListen()}{setListen()}}
{\footnotesize\ttfamily bool Parser\+::set\+Listen (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Transform the token into the listening port of the server. 

\begin{DoxyReturn}{Returns}
true or throw an exception 
\end{DoxyReturn}


Definition at line 264 of file parsing.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{264                        \{}
\DoxyCodeLine{265     validateFirstToken(\textcolor{stringliteral}{"{}server\_name"{}});}
\DoxyCodeLine{266     \textcolor{keywordtype}{string} num = *it;}
\DoxyCodeLine{267     \textcolor{keywordflow}{if} (num.find(\textcolor{stringliteral}{"{}:"{}}) == num.npos) \{}
\DoxyCodeLine{268         \textcolor{keywordtype}{int} port                           = \mbox{\hyperlink{classParser_a32db756a819d2d0454071100f469805d}{retrievePort}}(num);}
\DoxyCodeLine{269         (httpConfig.\mbox{\hyperlink{structHttpConfig_af3c802628373bf70e0436c31c3dc2ef3}{servers}}.back()).listen = std::make\_pair(\textcolor{stringliteral}{"{}"{}}, port);}
\DoxyCodeLine{270     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{271         \textcolor{keywordtype}{string} address                     = num.substr(0, num.find(\textcolor{stringliteral}{"{}:"{}}));}
\DoxyCodeLine{272         num                                = num.substr(num.find(\textcolor{stringliteral}{"{}:"{}}) + 1);}
\DoxyCodeLine{273         \textcolor{keywordtype}{int} port                           = \mbox{\hyperlink{classParser_a32db756a819d2d0454071100f469805d}{retrievePort}}(num);}
\DoxyCodeLine{274         (httpConfig.\mbox{\hyperlink{structHttpConfig_af3c802628373bf70e0436c31c3dc2ef3}{servers}}.back()).listen = std::make\_pair(address, port);}
\DoxyCodeLine{275     \}}
\DoxyCodeLine{276     validateLastToken(\textcolor{stringliteral}{"{}listen"{}});}
\DoxyCodeLine{277     \textcolor{keywordflow}{return} (\textcolor{keyword}{true});}
\DoxyCodeLine{278 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classParser_a2fd377280dd07402810b49b0afbc36a0}\label{classParser_a2fd377280dd07402810b49b0afbc36a0}} 
\index{Parser@{Parser}!setServerName@{setServerName}}
\index{setServerName@{setServerName}!Parser@{Parser}}
\doxysubsubsection{\texorpdfstring{setServerName()}{setServerName()}}
{\footnotesize\ttfamily bool Parser\+::set\+Server\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Set the server name. 

\begin{DoxyReturn}{Returns}
true or throw invalid\+\_\+argument 
\end{DoxyReturn}


Definition at line 289 of file parsing.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{289                            \{}
\DoxyCodeLine{290     validateFirstToken(\textcolor{stringliteral}{"{}server\_name"{}});}
\DoxyCodeLine{291     (httpConfig.\mbox{\hyperlink{structHttpConfig_af3c802628373bf70e0436c31c3dc2ef3}{servers}}.back()).server\_name = *it;}
\DoxyCodeLine{292     std::cout << \textcolor{stringliteral}{"{}Server\_name: "{}} << *it << std::endl;}
\DoxyCodeLine{293     validateLastToken(\textcolor{stringliteral}{"{}server\_name"{}});}
\DoxyCodeLine{294     \textcolor{keywordflow}{return} (\textcolor{keyword}{true});}
\DoxyCodeLine{295 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classParser_a62b7984e1c4b0f3d9d34385d900c9905}\label{classParser_a62b7984e1c4b0f3d9d34385d900c9905}} 
\index{Parser@{Parser}!tokenizeConfig@{tokenizeConfig}}
\index{tokenizeConfig@{tokenizeConfig}!Parser@{Parser}}
\doxysubsubsection{\texorpdfstring{tokenizeConfig()}{tokenizeConfig()}}
{\footnotesize\ttfamily void Parser\+::tokenize\+Config (\begin{DoxyParamCaption}\item[{string}]{line }\end{DoxyParamCaption})}



Tokenize a line of a config file. 


\begin{DoxyParams}{Parameters}
{\em line} & \mbox{[}in\mbox{]} Line to tokenize \\
\hline
\end{DoxyParams}


Definition at line 48 of file parsing.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{48                                        \{}
\DoxyCodeLine{49     \textcolor{keywordflow}{while} (line.size() > 0) \{}
\DoxyCodeLine{50         \textcolor{keywordtype}{size\_t} pos = line.find\_first\_not\_of(\textcolor{stringliteral}{"{} \(\backslash\)t"{}});}
\DoxyCodeLine{51         \textcolor{keywordflow}{if} (pos == line.npos || line[pos] == \textcolor{charliteral}{'\#'}) \{}
\DoxyCodeLine{52             \textcolor{keywordflow}{break};}
\DoxyCodeLine{53         \}}
\DoxyCodeLine{54         line = line.substr(pos);}
\DoxyCodeLine{55         pos  = line.find\_first\_of(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)\#\{\}; \(\backslash\)t\(\backslash\)n\(\backslash\)0"{}});}
\DoxyCodeLine{56         pos == 0 ? pos = 1 : pos;}
\DoxyCodeLine{57         \textcolor{keywordtype}{string} tmp = line.substr(0, pos);}
\DoxyCodeLine{58         tokens.push\_back(tmp);}
\DoxyCodeLine{59         ;}
\DoxyCodeLine{60         line = line.substr(tmp.size());}
\DoxyCodeLine{61     \}}
\DoxyCodeLine{62 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/parsing.\+hpp\item 
src/\mbox{\hyperlink{parsing_8cpp}{parsing.\+cpp}}\end{DoxyCompactItemize}
