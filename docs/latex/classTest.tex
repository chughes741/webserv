\hypertarget{classTest}{}\doxysection{Test Class Reference}
\label{classTest}\index{Test@{Test}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classTest_a99f2bbfac6c95612322b0f10e607ebe5}{Test}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 27 of file Test.\+hpp.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classTest_a99f2bbfac6c95612322b0f10e607ebe5}\label{classTest_a99f2bbfac6c95612322b0f10e607ebe5}} 
\index{Test@{Test}!Test@{Test}}
\index{Test@{Test}!Test@{Test}}
\doxysubsubsection{\texorpdfstring{Test()}{Test()}}
{\footnotesize\ttfamily Test\+::\+Test (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000013}{Todo}}]this conversion is not possible \end{DoxyRefDesc}


\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000014}{Todo}}]to\+\_\+string in C++11 \end{DoxyRefDesc}


Definition at line 29 of file Test.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{29            \{}
\DoxyCodeLine{30         \textcolor{keywordtype}{int}                server\_fd;}
\DoxyCodeLine{31         \textcolor{keyword}{struct }sockaddr\_in address;}
\DoxyCodeLine{32         \textcolor{keywordtype}{int}                addrlen = \textcolor{keyword}{sizeof}(address);}
\DoxyCodeLine{33         \textcolor{keyword}{const} \textcolor{keywordtype}{int}          port    = (httpConfig.\mbox{\hyperlink{structHttpConfig_af3c802628373bf70e0436c31c3dc2ef3}{servers}}.back()).listen.second;}
\DoxyCodeLine{34         \textcolor{comment}{// const int port = 8080;}}
\DoxyCodeLine{35 }
\DoxyCodeLine{36         if ((server\_fd = socket(AF\_INET, SOCK\_STREAM, 0)) == 0) \{}
\DoxyCodeLine{37             perror(\textcolor{stringliteral}{"{}in socker"{}});}
\DoxyCodeLine{38             exit(EXIT\_FAILURE);}
\DoxyCodeLine{39         \}}
\DoxyCodeLine{40         \textcolor{keywordtype}{int} opt = 1;}
\DoxyCodeLine{41         \textcolor{keywordflow}{if} (setsockopt(server\_fd, SOL\_SOCKET, SO\_REUSEADDR, \&opt, \textcolor{keyword}{sizeof}(opt)) <}
\DoxyCodeLine{42             0) \{}
\DoxyCodeLine{43             perror(\textcolor{stringliteral}{"{}setsockopt"{}});}
\DoxyCodeLine{44             exit(EXIT\_FAILURE);}
\DoxyCodeLine{45         \}}
\DoxyCodeLine{46 }
\DoxyCodeLine{47         address.sin\_family      = AF\_INET;}
\DoxyCodeLine{48         address.sin\_addr.s\_addr = INADDR\_ANY;}
\DoxyCodeLine{49         address.sin\_port        = htons(port);}
\DoxyCodeLine{50 }
\DoxyCodeLine{51         memset(address.sin\_zero, \textcolor{charliteral}{'\(\backslash\)0'}, \textcolor{keyword}{sizeof}(address.sin\_zero));}
\DoxyCodeLine{52 }
\DoxyCodeLine{53         \textcolor{keywordflow}{if} (bind(server\_fd, (\textcolor{keyword}{struct} sockaddr *)\&address, \textcolor{keyword}{sizeof}(address)) < 0) \{}
\DoxyCodeLine{54             perror(\textcolor{stringliteral}{"{}Bind failed"{}});}
\DoxyCodeLine{55             exit(EXIT\_FAILURE);}
\DoxyCodeLine{56         \}}
\DoxyCodeLine{57         \textcolor{keywordflow}{if} (listen(server\_fd, 10) < 0) \{}
\DoxyCodeLine{58             perror(\textcolor{stringliteral}{"{}In listen"{}});}
\DoxyCodeLine{59             exit(EXIT\_FAILURE);}
\DoxyCodeLine{60         \}}
\DoxyCodeLine{61         \textcolor{keywordtype}{int} new\_socket;}
\DoxyCodeLine{62         \textcolor{keywordflow}{while} (1) \{}
\DoxyCodeLine{63             \textcolor{keywordflow}{if} ((new\_socket = accept(server\_fd, (\textcolor{keyword}{struct} sockaddr *)\&address,}
\DoxyCodeLine{64                                      (socklen\_t *)\&addrlen)) < 0) \{}
\DoxyCodeLine{65                 perror(\textcolor{stringliteral}{"{}In accept"{}});}
\DoxyCodeLine{66                 exit(EXIT\_FAILURE);}
\DoxyCodeLine{67             \}}
\DoxyCodeLine{68             \textcolor{keywordtype}{char} buffer[30000] = \{0\};}
\DoxyCodeLine{69             \textcolor{keywordtype}{long} valread       = read(new\_socket, buffer, 30000);}
\DoxyCodeLine{70             \textcolor{keywordflow}{if} (valread < 0) \{}
\DoxyCodeLine{71             \}}
\DoxyCodeLine{72             std::cout << buffer << std::endl;}
\DoxyCodeLine{73             \textcolor{comment}{// open and read the file}}
\DoxyCodeLine{74             std::string        request(buffer);}
\DoxyCodeLine{75             std::string        resource;}
\DoxyCodeLine{76             std::istringstream iss(request);}
\DoxyCodeLine{77             std::string        line;}
\DoxyCodeLine{78             std::getline(iss, line);}
\DoxyCodeLine{79             \textcolor{keywordflow}{if} (line.find(\textcolor{stringliteral}{"{}GET"{}}) != std::string::npos) \{}
\DoxyCodeLine{80                 \textcolor{keywordtype}{size\_t} start = line.find\_first\_of(\textcolor{stringliteral}{"{} "{}}) + 1;}
\DoxyCodeLine{81                 \textcolor{keywordtype}{size\_t} end   = line.find\_last\_of(\textcolor{stringliteral}{"{} "{}}) -\/ 1;}
\DoxyCodeLine{82                 resource     = line.substr(start, end -\/ start + 1);}
\DoxyCodeLine{83             \}}
\DoxyCodeLine{84             std::cout << resource << std::endl;}
\DoxyCodeLine{85             std::ifstream file;}
\DoxyCodeLine{86             \textcolor{keywordflow}{if} (resource.compare(\textcolor{stringliteral}{"{}/"{}}) == 0) \{}
\DoxyCodeLine{87                 file.open(\textcolor{stringliteral}{"{}docs/\_site/index.html"{}});}
\DoxyCodeLine{88             \} \textcolor{keywordflow}{else} \{ }
\DoxyCodeLine{89                 file.open(\textcolor{stringliteral}{"{}docs/\_site"{}} + resource);}
\DoxyCodeLine{90             \}}
\DoxyCodeLine{91             std::stringstream file\_buffer;}
\DoxyCodeLine{92             file\_buffer << file.rdbuf();}
\DoxyCodeLine{93             file.close();}
\DoxyCodeLine{94             std::string file\_contents = file\_buffer.str();}
\DoxyCodeLine{95             setBlocking(new\_socket, \textcolor{keyword}{true});}
\DoxyCodeLine{97             std::string response =}
\DoxyCodeLine{98                 \textcolor{stringliteral}{"{}HTTP/1.1 200 OK\(\backslash\)r\(\backslash\)nContent-\/Type: "{}}}
\DoxyCodeLine{99                 \textcolor{stringliteral}{"{}text/html\(\backslash\)r\(\backslash\)nContent-\/Length: "{}} +}
\DoxyCodeLine{100                 std::to\_string(file\_contents.size()) + \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n\(\backslash\)r\(\backslash\)n"{}} +}
\DoxyCodeLine{101                 file\_contents + \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n"{}};}
\DoxyCodeLine{102             \textcolor{comment}{// write(new\_socket, response.c\_str(), response.size());}}
\DoxyCodeLine{103             send(new\_socket, response.c\_str(), response.size(), 0);}
\DoxyCodeLine{104             \textcolor{comment}{// setBlocking(new\_socket, false);}}
\DoxyCodeLine{105             close(new\_socket);}
\DoxyCodeLine{106             file\_buffer.clear();}
\DoxyCodeLine{107         \}}
\DoxyCodeLine{108         close(server\_fd);}
\DoxyCodeLine{109     \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/Test.\+hpp\end{DoxyCompactItemize}
